/*
 * input.c
 *
 *  Created on: Sep 23, 2025
 *      Author: vermi
 */


#include <input.h>

bool is_input_on(Input* this)
{
	return this->state;
}

bool is_input_rising(Input* this)
{
	return !this->last_state && this->state;
}

bool is_input_falling(Input* this)
{
	return this->last_state && !this->state;
}

void operate_device(void)
{

}

void update_input(Input* this)
{
	this->last_state = this->state;
	bool state = HAL_GPIO_ReadPin(this->port, this->pin);
	this->state = (this->type == NOMAL_OPEN) ? state : !state;

	if (is_input_on(this))      operate_device();
	if (is_input_rising(this))  operate_device();
	if (is_input_falling(this)) operate_device();
}

void set_callback()
{

}
